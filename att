SELECT * FROM GENERO;



ALTER TABLE tipo_documento

ADD CONSTRAINT



--Create tabla TIPO_DOCUMENTO;

CREATE TABLE tipo_documento (

  id_tipodocumento NUMBER PRIMARY KEY,

  nombre VARCHAR2(100) NOT NULL,

  documento CHAR(1),

  sigla VARCHAR2(10),

  codigo VARCHAR2(10),

  

  fecha_creacion TIMESTAMP,

  fecha_actualizacion TIMESTAMP,

  usuario_reacion NUMBER,

  usuario_actualizacion NUMBER

);

INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(1,'DOCUMENTO NACIONAL DE IDENTIDAD',1,'DNI','01');

INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(2,'PASAPORTE',2,'PASAPORTE','02');



INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(3,'CARNET DE EXTRANJERIA',3,'CARNET EXT','03');

  

INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(4,'PART. DE NACIMIENTO-IDENTIDAD',4,' 

P. NAC','04');



INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(5,'OTRO',5,'OTRO','05');



//Crear una secuencia para TIPODOCUMENTO

CREATE SEQUENCE SQ_TIPODOCUMENTO

  MINVALUE 10

  INCREMENT BY 2

  NOMAXVALUE;



--Crear un Trigger para TIPODOCUMENTO;

CREATE TRIGGER TRG_TIPODOCUMENTO

BEFORE INSERT ON TIPO_DOCUMENTO

FOR EACH ROW

BEGIN

  SELECT SQ_TIPODOCUMENTO.NEXTVAL INTO :NEW.id_tipodocumento FROM DUAL;

END;



SELECT * FROM TIPO_DOCUMENTO;



ALTER TABLE tipo_documento

ADD CONSTRAINT UQ_CODIGO_TIPO_DOCUMENTO

UNIQUE (CODIGO);



INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(1,'DOCUMENTO NACIONAL DE IDENTIDAD',1,'DNI2','06');



ALTER TABLE tipo_documento

DROP CONSTRAINT UQ_CODIGO_TIPO_DPCUMENTO;





INSERT INTO TIPO_DOCUMENTO

(ID_TIPODOCUMENTO, NOMBRE, DOCUMENTO, SIGLA, CODIGO)

VALUES

(1,'DOCUMENTO NACIONAL DE IDENTIDAD',1,'DNIE','05');



--Crear tabla PERSONA;

CREATE TABLE persona(

  id_persona NUMBER PRIMARY KEY,

  nombre VARCHAR2(50) NOT NULL,

  paterno VARCHAR2(50) NOT NULL,

  materno VARCHAR2(50),

  num_documento VARCHAR2(10) NOT NULL,

  fecha_nacimiento DATE,

  direccion VARCHAR2(50) NOT NULL,

  correo VARCHAR2(50) NOT NULL,

  nacionalidad VARCHAR2(50),

  celular VARCHAR2(10) NOT NULL,

  estado CHAR(1) DEFAULT 1,

  

  fecha_creacion TIMESTAMP,

  fecha_actualizacion TIMESTAMP,

  usuario_creacion NUMBER,

  usuario_actualizacion NUMBER,

  

  CONSTRAINT UQ_PERSONA

    UNIQUE (num_documento,celular)

);

ALTER TABLE PERSONA

  ADD (ID_GENERO INT);

  

ALTER TABLE PERSONA

  ADD CONSTRAINT FK_GENERO

  FOREIGN KEY (ID_GENERO)

  REFERENCES GENERO(ID_GENERO);

  

ALTER TABLE PERSONA

  ADD (ID_TIPODOCUMENTO INT);

  

ALTER TABLE PERSONA

  ADD CONSTRAINT FK_TIPO_DOCUMENTO

  FOREIGN KEY (ID_TIPODOCUMENTO)

  REFERENCES TIPO_DOCUMENTO(ID_TIPODOCUMENTO);

  

ALTER TABLE PERSONA

DROP COLUMN ID_TIPODOCUMENTO;



SELECT * FROM PERSONA;





INSERT INTO PERSONA



(ID_PERSONA, NOMBRE, PATERNO, MATERNO, NUM_DOCUMENTO, FECHA_NACIMIENTO, DIRECCION, CORREO, NACIONALIDAD, CELULAR, ESTADO, ID_GENERO, ID_TIPO_DOCUMENTO)

VALUES

(1, 'Juan', 'Perez', 'Gomez', '12345', '15-05-1990', 'Calle 123', 'juan@gmail.com', 'Peruano', '12345678', 1, 1, 1);



INSERT INTO PERSONA



(ID_PERSONA, NOMBRE, PATERNO, MATERNO, NUM_DOCUMENTO, FECHA_NACIMIENTO, DIRECCION, CORREO, NACIONALIDAD, CELULAR, ESTADO, ID_GENERO, ID_TIPO_DOCUMENTO)

VALUES

(2, 'Mariana', 'Lopez', 'Garcia', '0987654321', '20-10-1988', 'Avenida 456', 'mariana@gmail.com', 'Peruana', '9876543210', 1, 1, 1);



INSERT INTO PERSONA



(ID_PERSONA, NOMBRE, PATERNO, MATERNO, NUM_DOCUMENTO, FECHA_NACIMIENTO, DIRECCION, CORREO, NACIONALIDAD, CELULAR, ESTADO, ID_GENERO, ID_TIPO_DOCUMENTO)

VALUES

(3, 'Pedro', 'Ramirez', 'Hernandez', '1357924680', '25-12-1995', 'Plaza 789', 'pedro@gmail.com', 'Mexicano', '1357924680', 1, 1, 1);



INSERT INTO PERSONA



(ID_PERSONA, NOMBRE, PATERNO, MATERNO, NUM_DOCUMENTO, FECHA_NACIMIENTO, DIRECCION, CORREO, NACIONALIDAD, CELULAR, ESTADO, ID_GENERO, ID_TIPO_DOCUMENTO)

VALUES

(4, 'Ana', 'Gonzalez', 'Martinez', '2468013579', '30-08-1992', 'Boulevard 246', 'ana@gmail.com', 'Mexicana', '2468013579', 1, 1, 1);



INSERT INTO PERSONA



(ID_PERSONA, NOMBRE, PATERNO, MATERNO, NUM_DOCUMENTO, FECHA_NACIMIENTO, DIRECCION, CORREO, NACIONALIDAD, CELULAR, ESTADO, ID_GENERO, ID_TIPO_DOCUMENTO)

VALUES

(5, 'Carlos', 'Diaz', 'Rodriguez', '9876543210', '10-04-1998', 'Ronda 789', 'carlos@gmail.com', 'Argentino', '9876543210', 1, 1, 1);



INSERT INTO PERSONA



(ID_PERSONA, NOMBRE, PATERNO, MATERNO, NUM_DOCUMENTO, FECHA_NACIMIENTO, DIRECCION, CORREO, NACIONALIDAD, CELULAR, ESTADO, ID_GENERO, ID_TIPO_DOCUMENTO)

VALUES

(6, 'Laura', 'Sanchez', 'Lopez', '5678901234', '05-03-1997', 'Carrera 567', 'laura@gmail.com', 'Argentina', '5678901234', 1, 1, 1);



--actualizando datosssss

UPDATE PERSONA

SET celular = 47599583

WHERE id_persona = 5;



SELECT * FROM PERSONA; 

SELECT * FROM GENERO; 

SELECT * FROM TIPO_DOCUMENTO;



SELECT * FROM PERSONA P

INNER JOIN GENERO G

ON P.ID_GENERO = G.ID_GENERO

INNER JOIN TIPO_DOCUMENTO TD

ON P.ID_TIPO_DOCUMENTO = TD.ID_TIPODOCUMENTO;
